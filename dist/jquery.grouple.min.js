/*! Grouple - v0.1.0 - 2012-04-29
* https://github.com/jonaphin/grouple
* Copyright (c) 2012 Jonathan Lancar; Licensed MIT */
(function(a){var b=function(b,c){var d=this;this.items=[],this.settings=a.extend({},c),this.canvasWidth=a(b).width(),this.canvasHeight=a(b).height(),this.centerX=this.canvasWidth/2,this.centerY=this.canvasHeight/2,this.radiusOuterEnd=(this.centerX<this.centerY?this.centerX:this.centerY)*.9,this.radiusInner=this.radiusOuterEnd*.6,this.radiusOuterInit=this.radiusInner+(this.radiusOuterEnd-this.radiusInner)/2,a(b).html('<canvas class="grouple-canvas" width="'+this.canvasWidth+'" height="'+this.canvasHeight+'"></canvas>');var e=a(b).find("canvas")[0],f=e.getContext("2d");this.render=function(){d.circle(d.centerX,d.centerY,d.radiusOuterInit,d.settings.outerCircleInnerStrokeColor),d.stroke(d.settings.outerStrokeWidth,d.settings.outerStrokeColor),d.circle(d.centerX,d.centerY,d.radiusOuterInit-3,d.settings.outerFillColor),d.circle(d.centerX,d.centerY,d.radiusInner,d.settings.innerFillColor),d.stroke(d.settings.innerStrokeWidth,d.settings.innerStrokeColor)},this.expand=function(a,b){if(a===b)return;d.clear(),a<b?a++:a>b&&a--,d.circle(d.centerX,d.centerY,a,d.settings.outerCircleInnerStrokeColor),d.stroke(d.settings.outerStrokeWidth,d.settings.outerStrokeColor),d.circle(d.centerX,d.centerY,a-3,d.settings.outerFillColor),d.circle(d.centerX,d.centerY,d.radiusInner,d.settings.innerFillColor),d.stroke(d.settings.innerStrokeWidth,d.settings.innerStrokeColor),setTimeout(function(){d.expand(a,b)},5)},a(e).live("mouseover",function(a){d.expand(d.radiusOuterInit,d.radiusOuterEnd)}).live("mouseout",function(a){d.expand(d.radiusOuterEnd,d.radiusOuterInit)}),this.circle=function(a,b,c,d){f.fillStyle=d,f.beginPath(),f.arc(a,b,c,0,Math.PI*2,!0),f.closePath(),f.fill()},this.stroke=function(a,b){if(a===0)return;f.lineWidth=a,f.strokeStyle=b,f.stroke()},this.clear=function(){f.clearRect(0,0,d.canvasWidth,d.canvasHeight)},this.event_to_canvas=function(a){if(a.layerX||a.layerX===0)a._x=a.layerX,a._y=a.layerY;else if(a.offsetX||a.offsetX===0)a._x=a.offsetX,a._y=a.offsetY;var b=d[a.type];typeof b=="function"&&b(a)}};a.fn.grouple=function(c){var d=this;return c=a.extend({},a.fn.grouple.options,c),this.opts=c,this.options=function(a){if(typeof a=="string")return c[a];if(typeof a=="object")for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return d.refresh(),c},this.refresh=function(){},this.each(function(){if(a(this).data("grouple_instance")!==undefined)return;var d=new b(this,c);d.render(),a(this).data("grouple_instance",d)})},a.fn.grouple.options={innerStrokeWidth:1,innerStrokeColor:"#A5A5A5",outerStrokeWidth:1,outerStrokeColor:"#A5A5A5",innerFillColor:"#5E99CD",outerFillColor:"#EBEBEB",outerCircleInnerStrokeColor:"#FFFFFF"}})(jQuery);